<!DOCTYPE>
<!---
|    _        _        _____   ______ _____  _________
|   | |     _| |     _|  __  \|  ____|  __ \|___   ___|
|   | |    | | |    | | |__) /| |__  | |__) |   | |
|   | |    | | |    | |  __  \|  __| |  _  /    | |
|   | |____| | |____| | |__) || |____| | \ \    | |
|   |______/_|______/_|_____ /|______|_|  \_\   |_|
|
-->
<html ng-app="myApp">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" itemprop="description" content="Lilibert.com - Quizz app">
		<meta name="keywords" itemprop="keywords" content="quizz, quiz, app, lilibert, cat, fun">
		<meta name="robots" content="index,follow,noodp">
		<link rel="canonical" href="http://lilibert.com">
		<meta property="og:title" content="Lilibert">
		<meta property="og:url" content="http://lilibert.com">
		<meta property="og:image" content="http://lilibert.com?">
		<meta property="og:site_name" content="Lilibert">
		<meta property="og:description" content="Lilibert.com - Quizz app">
		<meta name="twitter:card" content="summary">
		<meta name="twitter:description" content="Lilibert.com - Quizz app">
		<meta itemprop="image" content="http://lilibert.com?">

		<base href="/">

		<title>Lilibert</title>

		<link rel="stylesheet" href="assets/css/vendor-8c01cb7455.css"/>

		<link href="assets/css/main.css" rel="stylesheet" type="text/css">
  </head>

	<body ng-controller="MainController as m">
		<div ng-show="currentUser" class="UserProfile">
		  <div class="User">
		    <div class="name">{{currentUser.username}}</div>
		    <div class="image"><img src="{{currentUser.picture}}"></div>
		  </div>
		</div>
		<div ng-class="stateIsLoading ? '' : 'loaded'" class="loading-spinner">
			<span class="circle"></span>
		</div>
		<div ng-if="!stateIsLoading" ui-view></div>
	</body>

  <script src="assets/scripts/vendor-46d5b6de7b.js"></script>

  <script>var app=angular.module("myApp",["ngAnimate","ui.router","ui.router.stateHelper","angular-jwt","ngSanitize","pascalprecht.translate","ng-giphy","ui.select","monospaced.elastic"]);console.log("%c\nLilibert.com\n------------\nHi there ! Nice to meet you!\n\nInterested in contributing to one of the coolest entertainment platform developped with â™¡ with technologies like AngularJS and NodeJS ðŸ˜€ ? \n\nVisit http://lilibert.com/jobs to learn about our current job openings.\n\n",'font: "Courier New", Monospace; font-size: 18px; color: #000'),app.run(["$rootScope","$state","$http","UserService",function(e,t,i,s){e.$on("$stateChangeStart",function(e,n,o){s.isAuthenticated()&&(i.defaults.headers.common["x-access-token"]=s.isAuthenticated()),n.redirectTo&&(e.preventDefault(),t.go(n.redirectTo,o)),n.data.requiresLogin?s.isAuthenticated()||(console.log("Not authenticated with requiresLogin TRUE"),e.preventDefault(),t.go("login.first")):s.isAuthenticated()&&(console.log("Authenticated with requiresLogin FALSE"),e.preventDefault(),t.go("home"))})}]),app.run(["$rootScope","$timeout",function(e,t){e.stateIsLoading=!0,e.$on("$stateChangeStart",function(){t(function(){e.stateIsLoading=!1},300)})}]),app.config(["stateHelperProvider","$urlRouterProvider","$locationProvider",function(e,t,i){t.otherwise("/"),e.state({name:"home",url:"/",data:{roles:["User","Admin"],requiresLogin:!0},templateUrl:"../../partials/_home.html"}).state({name:"setting",url:"/setting",data:{roles:["User","Admin"],requiresLogin:!0},templateUrl:"../../partials/User/_setting.html",children:[{name:"account",url:"/account",templateUrl:"../../partials/User/Setting/_account.html"},{name:"password",url:"/password",templateUrl:"../../partials/User/Setting/_password.html"}]}).state({name:"logout",url:"/logout",data:{roles:["User","Admin"],requiresLogin:!0},controller:["$state","UserService",function(e,t){t.logout(),e.go("login.first")}]}).state({name:"quizz_start",url:"/quizz/start/:qid",data:{roles:["User","Admin"],requiresLogin:!0},templateUrl:"../../partials/Quizz/_start.html"}).state({name:"quizz_view",url:"/quizz/view",redirectTo:"quizz_view.question",data:{roles:["User","Admin"],requiresLogin:!0},templateUrl:"../../partials/Quizz/_view.html",children:[{name:"question",url:"/:qid?{q:int}",templateUrl:"../../partials/Quizz/_question.html"}]}).state({name:"quizz_result",url:"/quizz/result/:qid",data:{roles:["User","Admin"],requiresLogin:!0},templateUrl:"../../partials/Quizz/_result.html"}).state({name:"quizz_create",url:"/quizz/create?qid",redirectTo:"quizz_create.first",data:{roles:["User","Admin"],requiresLogin:!0},templateUrl:"../../partials/Quizz/_create.html",children:[{name:"first",url:"/1",templateUrl:"../../partials/Quizz/Create/_first.html"},{name:"second",url:"/2",templateUrl:"../../partials/Quizz/Create/_second.html"},{name:"third",url:"/3",templateUrl:"../../partials/Quizz/Create/_third.html"},{name:"fourth",url:"/4",templateUrl:"../../partials/Quizz/Create/_fourth.html"}]}).state({name:"ads",url:"/ads",data:{roles:["User","Admin"],requiresLogin:!1},templateUrl:"../../partials/_ads.html"}).state({name:"login",url:"/login",redirectTo:"login.first",data:{roles:["User","Admin"],requiresLogin:!1},templateUrl:"../../partials/User/_login.html",children:[{name:"first",url:"/1",templateUrl:"../../partials/User/Login/_first.html"},{name:"second",url:"/2",templateUrl:"../../partials/User/Login/_second.html"},{name:"third",url:"/3",templateUrl:"../../partials/User/Login/_third.html"}]}).state({name:"signup",url:"/signup",redirectTo:"signup.first",data:{roles:["User","Admin"],requiresLogin:!1},templateUrl:"../../partials/User/_signup.html",children:[{name:"first",url:"/1",templateUrl:"../../partials/User/Signup/_first.html"},{name:"second",url:"/2",templateUrl:"../../partials/User/Signup/_second.html"},{name:"third",url:"/3",templateUrl:"../../partials/User/Signup/_third.html"},{name:"fourth",url:"/4",templateUrl:"../../partials/User/Signup/_fourth.html"}]}),i.html5Mode(!0)}]),app.config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"../../languages/",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("escape")}]),app.controller("MainController",["$scope","jwtHelper","UserService",function(e,t,i){e.$watch(i.isAuthenticated,function(){i.isAuthenticated()?e.currentUser=t.decodeToken(i.isAuthenticated()):e.currentUser=""})}]),app.controller("UserController",["$scope","$state","$window","UserService","UserLanguagesService","QuizzService","$translate",function(e,t,i,s,n,o,a){e.user={},e.success="Please finish the form :)",e.login=function(){s.login(e.user,function(s){s.success?(e.success="You are now connected !",i.sessionStorage.token=s.token,t.go("home")):(e.success="Oops, failed to login.",delete i.sessionStorage.token)})},e.getByEmail=function(){s.getByEmail(e.user.email,function(t){t.success?(console.log(t),e.user.username=t.user.username,e.user.picture=t.user.picture):console.log("No user for this email")})},e.logout=function(){s.logout(function(e){e.success&&(console.log("LOGOUT !"),t.go("login.first"))})},e.signup=function(){s.signup(e.user,function(s){s.success?(e.success="You are now a member !",i.sessionStorage.token=s.token,t.go("home")):(e.success="Oops, failed to signup.",delete i.sessionStorage.token)})},e.imageUpload=function(t){var i=new FileReader;i.onload=e.imageIsLoaded,i.readAsDataURL(t.files[0])},e.imageIsLoaded=function(t){e.$apply(function(){e.user.picture=t.target.result})}}]),app.service("UserService",["$http","$window","jwtHelper",function(e,t,i){this.isAuthenticated=function(){return!(!t.sessionStorage.token||i.isTokenExpired(t.sessionStorage.token))&&t.sessionStorage.token},this.edit=function(t,i){e.put("/api/users/",t).then(function(e){i(e.data)})},this.login=function(t,i){e.post("/api/auth/login",t).then(function(e){i(e.data)})},this.logout=function(i){e.post("/api/blacklist/token",{token:t.sessionStorage.token}).then(function(e){i(e.data)}),delete t.sessionStorage.token},this.signup=function(t,i){e.post("/api/auth/signup",t).then(function(e){i(e.data)})},this.getByEmail=function(t,i){e.get("/api/users/"+t+"/email").then(function(e){i(e.data)})},this.getMe=function(t){e.get("/api/users/me").then(function(e){t(e.data)})}}]),app.directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(e,t,i,s){e.$watch(function(){var t;return(e.passwordVerify||s.$viewValue)&&(t=e.passwordVerify+"_"+s.$viewValue),t},function(t){t&&s.$parsers.unshift(function(t){var i=e.passwordVerify;return i!==t?void s.$setValidity("passwordVerify",!1):(s.$setValidity("passwordVerify",!0),t)})})}}}),app.directive("backImg",function(){return function(e,t,i){i.$observe("backImg",function(e,i){i="rgba(8, 15, 255, 0.5)",t.css({"background-image":"linear-gradient(to bottom, "+i+" 0%, rgba(0, 0, 0, 0.7) 100%), url("+e+")","background-size":"cover","background-attachment":"fixed","background-position":"center"})})}}),app.service("UserLanguagesService",function(){this.get=function(){return[{id:1,name:"fr"},{id:2,name:"en"},{id:3,name:"es"}]}}),app.controller("UserEditController",["$scope","$state","UserService","UserLanguagesService","$translate",function(e,t,i,s,n){e.languages=s.get(),e.autosave=!1,e.autosave_msg="Confirm the modifications",i.getMe(function(t){t.success?(e.user=t.user,console.log(t.user)):console.log("No user for this uid")}),e.save=function(){i.edit(e.user,function(t){t.success?e.autosave_msg="Profile updated successfully!":e.autosave_msg="Failed to update your profile!"})},e.$watch("user",function(t,i){i&&(e.autosave=!0)},!0),e.changeLanguage=function(t){n.use(t),e.lang=t,console.log(t)}}]),app.controller("HomeController",["$scope","QuizzService","$translate",function(e,t,i){t.getByUid(function(t){t.success?(e.quizzes=t.quizzes,console.log(e.quizzes)):e.quizzes="There is no quizz..."}),e.deleteQuizz=function(i,s){e.quizzes.splice(s,1),t.delete(i,function(e){e.success?console.log(e):console.log("Failed to delete the quizz!")})};var s={};s.category="Fun",t.getWithParameters(s,function(e){e.success&&console.log(e)})}]),app.controller("QuizzCreateController",["$scope","$state","$window","$location","$timeout","QuizzService","QuizzCategoriesService",function(e,t,i,s,n,o,a){e.categories=a.get(),e.success="Finished the quiz ?",e.autosave=!1,e.autosave_msg="Confirm the modifications",e.global="",o.getByUid(function(e){e.success?console.log(e):console.log("Failed to provide quizzes from this user!")}),o.getById(s.search().qid,function(t){t.success?(e.quizz=t.quizz.data,e.global=t.quizz):(console.log("No quizz for this id"),o.create(function(t){t.success?(e.success="Quizz created successfully!",e.quizz=t.quizz,e.global=t,s.search("qid",t.quizz.qid)):console.log("Failed to create the quizz!")}))}),e.save=function(){e.autosave_msg="Wait a second...",o.edit(e.global,function(t){n(function(){t.success?e.autosave_msg="Quizz saved successfully!":e.autosave_msg="Failed to save the quiz!"},1e3)})},e.$watch("quizz",function(t,i){i&&(e.autosave=!0)},!0),e.publish=function(){e.quizz.isPublished=!e.quizz.isPublished},e.addQuestion=function(t){var i={question:"",answers:[{answer:"",profile:""}]};e.quizz.questions.length<=t+1&&e.quizz.questions.splice(t+1,0,i)},e.deleteQuestion=function(t,i){1==t.which&&e.quizz.questions.splice(i,1)},e.addAnswer=function(t,i){var s={answer:"",profile:""};e.quizz.questions[t].answers.length<=i+1&&e.quizz.questions[t].answers.splice(i+1,0,s)},e.deleteAnswer=function(t,i,s){1==t.which&&e.quizz.questions[i].answers.splice(s,1)},e.addProfile=function(t){var i={name:"",desc:""};e.quizz.profiles.length<=t+1&&e.quizz.profiles.splice(t+1,0,i)},e.deleteProfile=function(t,i){1==t.which&&e.quizz.profiles.splice(i,1)},e.imageUpload=function(t){var i=new FileReader;i.onload=e.imageIsLoaded,i.readAsDataURL(t.files[0])},e.imageIsLoaded=function(t){e.$apply(function(){e.quizz.picture=t.target.result})}}]),app.service("QuizzService",["$http",function(e){this.create=function(t){e.post("/api/quizzes").then(function(e){t(e.data)})},this.edit=function(t,i){e.put("/api/quizzes/",t).then(function(e){i(e.data)})},this.delete=function(t,i){e.delete("/api/quizzes/"+t+"/quizz").then(function(e){i(e.data)})},this.getById=function(t,i){e.get("/api/quizzes/"+t+"/quizz").then(function(e){i(e.data)})},this.getByUid=function(t){e.get("/api/quizzes/me").then(function(e){t(e.data)})},this.getWithParameters=function(t,i){e.get("/api/quizzes/test",{params:{category:t.category}}).then(function(e){i(e.data)})}}]),app.controller("QuizzStartController",["$scope","$state","$stateParams","QuizzService",function(e,t,i,s){e.quizz={},s.getById(i.qid,function(t){t.success?(e.quizz=t.quizz.data,e.quizz.qid=i.qid):console.log("No quiz for this id")})}]),app.controller("QuizzViewController",["$scope","$state","$stateParams","$location","QuizzService",function(e,t,i,s,n){e.quizz={},e.results={},e.getNumber=function(e){return new Array(e)},n.getById(i.qid,function(n){if(n.success){var o=n.quizz.data;s.search().q||t.go("quizz_view.question",{q:0}),e.qid=i.qid,e.l=o.questions.length,e.title=o.title,e.picture=o.picture,e.$watch(function(){return s.search().q},function(i,s){o.questions.length>i?(e.q=parseInt(i),e.quizz=o.questions[i]):t.go("quizz_view.question",{q:0})})}else console.log("No quiz for this id")}),e.addResult=function(t,i){var s={data:i};e.results[t]=s,console.log(e.results)}}]),app.controller("QuizzResultController",["$scope","$state","$stateParams","QuizzService",function(e,t,i,s){e.quizz={},e.getNumber=function(e){return new Array(e)};params;s.getById(params.qid,function(t){if(t.success){if(params.n){var i=t.quizz.data,s=params.n-1;i.questions.length>=params.n&&(e.quizz=i.questions[s],e.quizz.qid=params.qid,e.quizz.n=params.n,e.quizz.l=i.questions.length,e.quizz.title=i.title,e.quizz.picture=i.picture)}}else console.log("No quiz for this id")})}]),app.service("QuizzCategoriesService",function(){this.get=function(){return[{id:1,name:"psycho"},{id:2,name:"astro"},{id:3,name:"sex"},{id:4,name:"social"},{id:5,name:"food"},{id:6,name:"sport"},{id:7,name:"politic"},{id:8,name:"fun"}]}});</script>

	</body>
</html>
